<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>마이페이지</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center py-10">
<div class="bg-white p-8 rounded-xl shadow-md w-full max-w-md mx-auto">
  <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">마이페이지</h1>

  <!-- 프로필 이미지 -->
  <div>
    <h3>프로필 이미지</h3>
    <div th:if="${user.profileImage != null}">
      <img th:src="@{${'/images/' +  user.profileImage}}" alt="프로필 이미지" width="100" height="100"/>
    </div>
    <div th:if="${user.profileImage == null}">
      <p>설정된 프로필 이미지가 없습니다.</p>
    </div>
  </div>

  <div class="space-y-3 text-lg mb-8">
    <p>
      <strong class="text-gray-700">아이디:</strong>
      <span th:text="${user.userId}" class="text-gray-900 ml-2">아이디</span>
    </p>
    <p>
      <strong class="text-gray-700">이름:</strong>
      <span th:text="${user.name}" class="text-gray-900 ml-2">이름</span>
    </p>
    <p>
      <strong class="text-gray-700">닉네임:</strong>
      <span th:text="${user.nickname}" class="text-gray-900 ml-2">닉네임</span>
    </p>
    <p>
      <strong class="text-gray-700">이메일:</strong>
      <span th:text="${user.email}" class="text-gray-900 ml-2">이메일</span>
    </p>
    <p>
      <strong class="text-gray-700">포인트:</strong>
      <span th:text="${user.point}" class="text-green-600 font-semibold ml-2">0</span>
    </p>
    <p>
      <strong class="text-gray-700">가입일:</strong>
      <span th:text="${user.joinDate}" class="text-gray-900 ml-2">가입일</span>
    </p>
  </div>

  <hr class="border-t-2 border-gray-200 my-8">

  <!-- 구매한 아이템 목록 중 프로필로 적용
  <div>
    <h3>보유 아이템 목록 (프로필로 설정 가능)</h3>
    <div th:if="${userItems != null}">
      <ul>
        <li th:each="userItem : ${userItems}">
          <img th:src="@{'/images/' + ${userItem.item.itemImage}}" alt="아이템 이미지" width="80" height="80">
          <span th:text="${userItem.item.itemName}"></span>

          <form th:action="@{/user/apply-profile}" method="post" style="display:inline;">
            <input type="hidden" name="itemId" th:value="${userItem.item.itemId}">
            <button type="submit">이걸로 설정</button>
          </form>

          <span th:if="${userItem.equipped}" style="color:green;">(현재 프로필)</span>
        </li>
      </ul>
    </div>
    <div th:if="${userItems == null or #lists.isEmpty(userItems)}">
      <p>구매한 아이템이 없습니다.</p>
    </div>
  </div>
-->

  <div class="flex flex-col space-y-3">
    <a href="/user/update"
       class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      회원정보 수정
    </a>
    <a href="/user/delete"
       class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      회원 탈퇴
    </a>
    <a href="/user/calendar"
       class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      출석현황
    </a>
    <a href="/user/test"
       class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      로그인 회원가입 테스트 페이지로
    </a>
    <a href="/item/shop"
       class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      아이템 상점으로 이동
    </a>
    <a href="/user/items"
       class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-150 ease-in-out">
      구매한 아이템 목록
    </a>

  </div>
</div>
</body>
</html>