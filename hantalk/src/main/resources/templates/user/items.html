<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>보유 아이템 목록</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen py-10">
<div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-md">
  <h1 class="text-2xl font-bold text-center mb-6 text-gray-800">구매한 아이템 목록</h1>

  <div th:if="${userItems != null and !#lists.isEmpty(userItems)}">
    <ul class="space-y-4">
      <li th:each="userItem : ${userItems}" class="flex items-center space-x-4 border-b pb-4">
        <img th:src="@{'/images/' + ${userItem.item.itemImage}}" alt="아이템 이미지" class="w-20 h-20 object-cover rounded">
        <div class="flex-1">
          <p class="font-semibold text-gray-800" th:text="${userItem.item.itemName}">아이템 이름</p>
          <!-- 프로필 이미지 또는 프레임 아이템 구분 -->
          <div class="flex-1">
            <p class="font-semibold text-gray-800" th:text="${userItem.item.itemName}">아이템 이름</p>

            <!-- 프로필 이미지 설정 버튼 -->
            <form th:if="${!userItem.item.itemImage.contains('frame')}"
                  th:action="@{/user/apply-profile}" method="post" class="inline-block mt-2">
              <input type="hidden" name="itemId" th:value="${userItem.item.itemId}">
              <button type="submit"
                      class="bg-blue-500 hover:bg-blue-600 text-white text-sm font-bold py-2 px-4 rounded transition">
                프로필 이미지로 설정
              </button>
              <span th:if="${userItem.equipped}" class="text-green-600 font-semibold ml-2">(현재 프로필)</span>
            </form>

            <!-- 프레임 설정 버튼 -->
            <form th:if="${userItem.item.itemImage.contains('frame')}"
                  th:action="@{/user/apply-frame}" method="post" class="inline-block mt-2">
              <input type="hidden" name="itemId" th:value="${userItem.item.itemId}">
              <button type="submit"
                      class="bg-purple-500 hover:bg-purple-600 text-white text-sm font-bold py-2 px-4 rounded transition">
                프레임으로 설정
              </button>
              <span th:if="${user.profileFrame == userItem.item.itemImage}"
                    class="text-purple-600 font-semibold ml-2">(현재 프레임)</span>
            </form>
          </div>

          <span th:if="${userItem.equipped}" class="text-green-600 font-semibold ml-2">(현재 프로필)</span>
        </div>
      </li>
    </ul>
  </div>

  <div th:if="${userItems == null or #lists.isEmpty(userItems)}" class="text-center text-gray-600 mt-6">
    <p>보유한 아이템이 없습니다.</p>
  </div>

  <div class="text-center mt-8">
    <a href="/user/view"
       class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded transition duration-150">
      마이페이지로 돌아가기
    </a>
  </div>
</div>
</body>
</html>