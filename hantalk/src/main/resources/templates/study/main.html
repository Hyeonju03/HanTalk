<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HanTalk - 학습 메뉴</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>

        .bg-main-dark { background-color: #2F4160; }
        .text-main-dark { color: #2F4160; }
        .bg-accent-pink { background-color: #F29DA0; }
        .text-accent-pink { color: #F29DA0; }
        .bg-soft-blue { background-color: #B5D0E3; }
        .text-soft-blue { color: #B5D0E3; }
        .hover-bg-soft-blue:hover { background-color: #B5D0E3; }
        .hover-text-accent-pink:hover { color: #F29DA0; }
        .container-custom { max-width: 1000px; }

        /* Sidebar active class */
        .sidebar-link.active {
            background-color: #F29DA0;
            color: #ffffff;
        }
        .sidebar-link:not(.active):hover {
            background-color: #F29DA0;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col bg-gray-50">

<div th:replace="~{fragments/header :: headerFragment}"></div>

<main class="flex-grow flex justify-center p-8 space-x-8">

    <!-- 학습 목록 사이드바 -->
    <div class="w-72">
        <aside class="bg-[#B5D0E3]/80 border-r border-[#B5D0E3]/50 p-4 shadow-lg flex flex-col backdrop-blur-sm rounded-xl h-[690px]">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-[#2F4160]">학습 목록</h2>
            </div>
            <nav class="flex-grow">
                <ul class="space-y-4">
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="lesson1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>단어 맞추기</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="lesson2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>문장 나열하기</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="lesson3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>객관식 문제</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="lesson4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>받아쓰기</span>
                        </button>
                    </li>

                    <hr class="my-4 border-gray-200" />

                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="note">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>오답노트</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="vocaList">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>단어장 (단어)</span>
                        </button>
                    </li>
                    <li>
                        <button class="sidebar-link flex items-center w-full p-3 text-lg text-[#2F4160] hover:bg-[#2F4160] hover:text-white rounded-lg transition-colors duration-200" data-lesson="sentenceList">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                            </svg>
                            <span>단어장 (문장)</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </aside>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="container-custom w-full">
        <div class="bg-white p-8 rounded-xl shadow-xl flex items-center justify-center h-full">
            <div id="main-content-area" class="w-full max-w-2xl text-center">
                <h2 id="content-title" class="text-3xl font-bold text-main-dark mb-4">
                    학습 메뉴를 선택해 주세요
                </h2>
                <img id="main-image" src="https://placehold.co/600x400/E5E7EB/4B5563?text=메뉴를 선택해 주세요" alt="선택된 학습 메뉴 이미지" class="w-full h-auto rounded-lg shadow-md mb-6" />
                <p id="content-description" class="text-gray-600 mb-8">
                    왼쪽 사이드바에서 원하는 학습 항목을 선택하면, 해당 학습에 대한 정보가 여기에 표시됩니다.
                </p>
                <a id="start-lesson-button" href="#"
                   class="inline-block px-8 py-4 text-xl font-bold bg-accent-pink text-white rounded-full shadow-lg transition-colors duration-200 hover:bg-[#2F4160]">
                    학습 시작하기
                </a>
            </div>
        </div>
    </div>
</main>

<script>
    const menuData = {
        lesson1: { title: "Lesson 1 - 단어 맞추기", image: "https://placehold.co/600x400/F29DA0/2F4160?text=단어 맞추기", description: "이미지와 주어진 단어 조각을 활용하여 올바른 단어를 만들어 보세요.", link: "/study/lesson1", type: 'popup' },
        lesson2: { title: "Lesson 2 - 문장 나열하기", image: "https://placehold.co/600x400/B5D0E3/2F4160?text=문장 나열하기", description: "흩어진 문장들을 순서대로 배열하여 올바른 문장을 완성하세요.", link: "/study/lesson2", type: 'popup' },
        lesson3: { title: "Lesson 3 - 객관식 문제", image: "https://placehold.co/600x400/F29DA0/2F4160?text=객관식 문제", description: "제공된 보기 중 정답을 선택하여 문제를 풀어보세요.", link: "/study/lesson3", type: 'popup' },
        lesson4: { title: "Lesson 4 - 받아쓰기", image: "https://placehold.co/600x400/B5D0E3/2F4160?text=받아쓰기", description: "음성을 듣고 들리는 대로 문장을 정확히 받아쓰세요.", link: "/study/lesson4", type: 'popup' },
        note:    { title: "오답노트", image: "https://placehold.co/600x400/F29DA0/2F4160?text=오답노트", description: "틀렸던 문제들을 다시 풀고 복습하는 공간입니다.", link: "/study/note", type: 'page' },
        vocaList:{ title: "단어장 (단어)", image: "https://placehold.co/600x400/B5D0E3/2F4160?text=단어장", description: "자주 틀리거나 중요한 단어들을 모아 나만의 단어장을 만들 수 있습니다.", link: "/study/vocaList", type: 'page' },
        sentenceList:{ title: "단어장 (문장)", image: "https://placehold.co/600x400/F29DA0/2F4160?text=문장장", description: "자주 틀리거나 중요한 문장들을 모아 나만의 문장장을 만들 수 있습니다.", link: "/study/sentenceList", type: 'page' }
    };

    const startButton = document.getElementById('start-lesson-button');
    const mainImage = document.getElementById('main-image');
    const contentTitle = document.getElementById('content-title');
    const contentDescription = document.getElementById('content-description');
    const contentArea = document.getElementById('main-content-area');

    document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const lessonId = e.currentTarget.dataset.lesson;
            const data = menuData[lessonId];

            // 모든 링크의 active 클래스 제거 후, 현재 클릭된 링크에만 active 클래스 추가
            document.querySelectorAll('.sidebar-link').forEach(item => item.classList.remove('active'));
            e.currentTarget.classList.add('active');

            contentTitle.textContent = data.title;
            mainImage.src = data.image;
            contentDescription.textContent = data.description;

            // 링크 타입에 따라 href 속성 설정
            if (data.type === 'page') {
                startButton.href = data.link;
                startButton.removeAttribute('onclick');
            } else {
                startButton.href = '#';
                startButton.setAttribute('onclick', `openSmallWindow('${data.link}'); return false;`);
            }
        });
    });

    function openSmallWindow(url) {
        window.open(url, "lessonWindow", "width=1000,height=700,left=200,top=100,resizable=yes,scrollbars=yes");
    }

    document.addEventListener('DOMContentLoaded', () => {
        const sidebarLinks = document.querySelectorAll('.sidebar-link');

        sidebarLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                // 이전에 활성화된 링크의 스타일을 제거합니다.
                sidebarLinks.forEach(item => {
                    item.classList.remove('bg-[#2F4160]', 'text-white');
                    item.classList.add('text-[#2F4160]');
                });

                // 클릭된 링크에 활성화 스타일을 추가합니다.
                event.currentTarget.classList.add('bg-[#2F4160]', 'text-white');
                event.currentTarget.classList.remove('text-[#2F4160]');
            });
        });
    });
</script>

<div class="py-4 text-gray-500 text-center text-sm bg-gray-100" th:replace="~{fragments/footer :: footerFragment}"></div>

</body>
</html>
