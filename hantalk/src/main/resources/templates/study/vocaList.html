<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>단어 목록</title>
</head>
<body>
<h1>단어 목록</h1>

<form th:action="@{/study/vocaList}" method="get" style="margin-bottom:12px;">
  <input type="text" name="kw" th:value="${kw}" placeholder="단어 또는 의미 검색">
  <button type="submit">검색</button>
</form>

<table>
  <thead>
  <tr>
    <th>순번</th>
    <th>단어</th>
    <th>뜻</th>
    <th>등록일</th>
  </tr>
  </thead>
  <tbody>
  <tr th:if="${paging == null || paging.content.isEmpty()}">
    <td colspan="4">단어 데이터가 존재하지 않습니다.</td>
  </tr>
  <tr th:each="voca, loop : ${paging.content}">
    <td th:text="${paging.number * paging.size + loop.count}"></td>
    <td th:text="${voca.vocabulary}"></td>
    <td th:text="${voca.description}"></td>
    <td th:text="${#temporals.format(voca.createDate, 'yyyy-MM-dd')}"></td>
  </tr>
  </tbody>
</table>

<div th:if="${paging != null && !paging.isEmpty()}" class="pagination" style="margin-top:12px;">
  <ul>
    <!-- 1) ‘이전 10’은 번호 앞에 (있을 때만) -->
    <li th:if="${hasPrevBlock}">
      <a th:href="@{|?page=${prevBlockPage}&kw=${kw}|}">이전</a>
    </li>

    <!-- 2) 현재 블록의 번호들 -->
    <li th:each="p : ${#numbers.sequence(start, end)}"
        th:classappend="${p == currentPage} ? 'active'">
      <a th:href="@{|?page=${p}&kw=${kw}|}" th:text="${p + 1}"></a>
    </li>

    <!-- 3) ‘다음 10’은 마지막 번호 **뒤에** (있을 때만) -->
    <li th:if="${hasNextBlock}">
      <a th:href="@{|?page=${nextBlockPage}&kw=${kw}|}">다음</a>
    </li>
  </ul>
</div>
<!-- 푸터 프래그먼트 삽입 -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
