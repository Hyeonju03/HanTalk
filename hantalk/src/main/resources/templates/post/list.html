<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판 목록</title>
</head>
<body>
<h1> 게시판</h1>

<div th:if="${msg}">
    <p th:text="${msg}" style="color:red;"></p>
</div>

<div th:if="${param.msg}">
    <p th:text="${param.msg}" style="color:red;"></p>
</div>

<form action="/post/search" method="get">
    <input type="text" name="keyword" placeholder="검색어 입력" required />
    <button type="submit">검색하기</button>
</form>

<!-- 카테고리 링크 -->
<a th:href="@{/post/공지사항}">공지사항</a>
<a th:href="@{/post/커뮤니티}">커뮤니티</a>
<a th:href="@{/post/문의사항}">문의사항</a>

<!-- 삭제 폼 -->
<form th:action="@{/post/sakjeProc}" method="post">
    <table>
        <thead>
        <tr>
            <th><input type="checkbox" onclick="toggleSelectAll(this)"> 전체선택</th>
            <th>제목</th>
            <th>작성자</th>
            <th>조회수</th>
            <th>작성일</th>
            <th>첨부파일</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post : ${list}">
            <td><input type="checkbox" name="postIds" th:value="${post.postId}" /></td>
            <td><a th:href="@{/post/view/{id}(id=${post.postId})}" th:text="${post.title}"></a></td>
            <td th:text="${post.userNo}"></td>
            <td th:text="${post.viewCount}"></td>
            <td th:text="${#temporals.format(post.createDate, 'yyyy-MM-dd HH:mm')}"></td>
            <td>
                <span th:if="${post.archive != null}">
                    <a th:href="@{/file/download(fileName=${post.archive})}" th:text="${post.archive}"></a>
                </span>
                <span th:if="${post.archive == null}">-</span>
            </td>
        </tr>
        </tbody>
    </table>

    <button type="submit">선택 삭제하기</button>
</form>

<script>
    function toggleSelectAll(source) {
        const checkboxes = document.getElementsByName('postIds');
        for (let i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = source.checked;
        }
    }
</script>




</body>
</html>
