<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>관리자 영상 수정</title>
  <meta charset="UTF-8" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script th:inline="javascript">
    // Tailwind CSS 메인 컬러 설정
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'dark-navy': '#2F4160',
                    'coral-pink': '#F29DA0',
                    'soft-sky': '#B5D0E3',
                }
            }
        }
    }
  </script>
</head>
<body class="bg-gray-100 font-sans antialiased">
<div class="container mx-auto p-6 md:p-8 max-w-2xl bg-white rounded-xl shadow-2xl mt-12">
  <h1 class="text-3xl font-bold text-dark-navy mb-8 text-center">영상 수정</h1>

  <!-- enctype 꼭 있어야 함 -->
  <form th:action="@{/video/admin/sujungProc}" method="post" enctype="multipart/form-data" class="space-y-6">

    <!-- 영상 ID 및 페이지 유지 -->
    <input type="hidden" name="videoId" th:value="${video.videoId}" />
    <input type="hidden" name="page" th:value="${param.page}" />

    <!-- 제목 -->
    <div>
      <label for="title" class="block text-gray-700 font-medium mb-2">제목:</label>
      <input type="text" id="title" name="title" th:value="${video.title}" required
             class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-soft-sky focus:border-soft-sky transition-colors duration-200" />
    </div>

    <!-- 설명 -->
    <div>
      <label for="content" class="block text-gray-700 font-medium mb-2">설명:</label>
      <textarea id="content" name="content" rows="4" required th:text="${video.content}"
                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-soft-sky focus:border-soft-sky transition-colors duration-200"></textarea>
    </div>

    <!-- 현재 파일 및 미리보기 섹션: grid 레이아웃으로 변경하고 시각적 그룹화 추가 -->
    <div class="p-6 border border-gray-200 rounded-lg bg-gray-50 grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
      <!-- 현재 파일명 -->
      <div>
        <p class="text-gray-700 font-medium mb-2">현재 파일:</p>
        <div class="bg-white p-3 rounded-lg border border-gray-200">
          <b th:text="${video.videoName ?: '파일이 없습니다'}">파일이 없습니다</b>
        </div>
      </div>
      <!-- 기존 영상 미리보기 -->
      <div th:if="${video.videoName}">
        <p class="text-gray-700 font-medium mb-2">영상 미리보기:</p>
        <video controls width="100%"
               class="rounded-lg shadow-md"
               th:src="@{'/videos/' + ${video.videoName}}"></video>
      </div>
    </div>

    <!-- 새 영상 업로드 -->
    <div>
      <label for="file" class="block text-gray-700 font-medium mb-2">새 영상 파일 (선택):</label>
      <input type="file" name="file" id="file" accept="video/mp4"
             class="block w-full text-sm text-gray-500
             file:mr-4 file:py-2 file:px-4
             file:rounded-full file:border-0
             file:text-sm file:font-semibold
             file:bg-soft-sky file:text-dark-navy
             hover:file:bg-opacity-80 transition-colors duration-200"/>
    </div>

    <!-- 버튼 그룹 -->
    <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4 mt-8 pt-4 border-t border-gray-200">
      <button type="submit"
              class="w-full sm:w-auto px-8 py-3 rounded-lg text-white font-semibold shadow-lg bg-dark-navy hover:bg-opacity-95 transition-all duration-200 hover:shadow-xl">
        수정
      </button>
      <a th:href="@{/video/admin/list(page=${param.page})}"
         class="w-full sm:w-auto text-center px-8 py-3 rounded-lg text-dark-navy font-semibold shadow-lg bg-gray-300 hover:bg-gray-400 transition-all duration-200 hover:shadow-xl">
        &larr; 목록으로
      </a>
    </div>

  </form>
</div>

<!-- 푸터 프래그먼트 삽입 -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

</body>
</html>
