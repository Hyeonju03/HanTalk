<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 파일 미리보기</title>
    <!-- Google Fonts & Tailwind CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
</head>

<body class="bg-[#f3f4f6] text-[#2F4160] font-[Nanum_Gothic,_맑은_고딕,_sans-serif] min-h-screen flex flex-col">

<!-- 헤더 -->
<div th:replace="~{fragments/header :: headerFragment}"></div>

<div class="flex flex-1 w-full max-w-5xl mx-auto px-4 py-8 gap-8">

    <!-- 사이드바 -->
    <nav class="w-72 bg-[#B5D0E3]/80 border-r border-[#B5D0E3]/50 p-4 shadow-lg flex flex-col backdrop-blur-sm flex-shrink-0">
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-[#2F4160]">📁 메뉴</h2>
        </div>
        <ul class="space-y-4"> <!-- 간격 조정: space-y-2에서 space-y-4로 변경 -->
            <li>
                <a href="/resource/admin/main" class="flex items-center p-3 text-[#2F4160] hover:bg-[#404040]/80 rounded-lg transition-colors duration-200">
                    <i class="fas fa-bars mr-3"></i> <!-- '관리자 메인' 아이콘은 유지 -->
                    <span>관리자 메인</span>
                </a>
            </li>
            <li>
                <a href="/resource/chuga" class="flex items-center p-3 text-[#2F4160] hover:bg-[#F29DA0]/80 rounded-lg transition-colors duration-200">
                    <i class="fas fa-plus-circle mr-3"></i> <!-- '자료 등록' 아이콘을 fas fa-plus-circle로 복원 -->
                    <span>자료 등록</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- 본문 -->
    <main class="flex-1 p-8 bg-white rounded-xl shadow-xl">
        <h1 class="text-3xl font-bold text-center text-[#2F4160] mb-8 break-words" th:text="${fileName}">파일명</h1>

        <!-- 이미지 미리보기 -->
        <div th:if="${isImage}" class="flex justify-center">
            <img th:src="@{|/resource/image/${fileName}|}" alt="이미지 미리보기" class="max-w-full h-auto rounded-md shadow border border-[#E0E0E0]" />
        </div>

        <!-- 오피스 파일 미리보기 -->
        <div th:if="${isOfficeFile}" class="flex justify-center mt-6">
            <iframe th:src="@{${googleViewerUrl}}" frameborder="0" class="w-full max-w-4xl h-[600px] rounded-md shadow border border-[#E0E0E0]"></iframe>
        </div>

        <!-- PDF 등 직접 미리보기 -->
        <div th:if="${isDocument and !isOfficeFile and !isText}" class="flex justify-center mt-6">
            <iframe th:src="@{|/resource/view/file/${fileName}|}" frameborder="0" class="w-full max-w-4xl h-[600px] rounded-md shadow border border-[#E0E0E0]"></iframe>
        </div>

        <!-- 텍스트 파일 -->
        <pre th:if="${isText}" class="mt-6 p-4 bg-[#B5D0E3] text-[#2F4160] rounded-md max-h-[600px] overflow-auto font-mono whitespace-pre-wrap">
        <span th:text="${textContent}">텍스트 내용</span>
    </pre>

        <!-- 미지원 파일 안내 -->
        <p th:if="${!isImage and !isDocument and !isText}" class="text-center text-red-500 font-semibold mt-8">
            미리보기를 지원하지 않는 파일입니다. 다운로드해 주세요.
        </p>

        <!-- 다운로드 링크 -->
        <p class="text-center text-lg mt-8">
            <a th:href="@{|/resource/download/file/${fileName}|}" class="text-[#2F4160] hover:underline font-semibold transition duration-300">
                <i class="fas fa-download mr-2"></i>파일 다운로드
            </a>
        </p>

        <!-- 관리자 목록으로 돌아가기 버튼 -->
        <div class="flex justify-center mt-8">
            <button type="button" class="bg-[#4B4B4B] text-white font-semibold py-2 px-6 rounded-lg hover:bg-[#2F4160] transition duration-300" onclick="location.href='/resource/admin/main'">
                <i class="fas fa-arrow-left mr-2"></i>관리자 목록으로
            </button>
        </div>
    </main>
</div>

<!-- 푸터 프래그먼트 삽입 -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

</body>
</html>
