<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 파일 미리보기</title>
    <!-- Google Fonts & Tailwind CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<!-- 헤더 -->
<div th:replace="~{fragments/header :: headerFragment}"></div>

<!-- flex-grow flex는 유지하되, ml-72 제거 및 w-full max-w-5xl mx-auto px-4 py-8를 여기에 적용 -->
<div class="flex flex-1 w-full max-w-5xl mx-auto px-4 py-8">

    <!-- 사이드바 제거됨 -->

    <!-- 본문 영역: flex-1만 남기고 ml-72 제거 -->
    <main class="flex-1 p-8 bg-white rounded-xl shadow-xl">
        <h1 class="text-3xl font-bold text-center text-[#2F4160] mb-8 break-words" th:text="${fileName}">파일명</h1>

        <!-- 이미지 미리보기 -->
        <div th:if="${isImage}" class="flex justify-center">
            <img th:src="@{|/resource/image/${fileName}|}" alt="이미지 미리보기" class="max-w-full h-auto rounded-md shadow border border-[#E0E0E0]" />
        </div>

        <!-- 오피스 파일 미리보기 -->
        <div th:if="${isOfficeFile}" class="flex justify-center mt-6">
            <iframe th:src="@{${googleViewerUrl}}" frameborder="0" class="w-full max-w-4xl h-[600px] rounded-md shadow border border-[#E0E0E0]"></iframe>
        </div>

        <!-- PDF 등 직접 미리보기 -->
        <div th:if="${isDocument and !isOfficeFile and !isText}" class="flex justify-center mt-6">
            <iframe th:src="@{|/resource/view/file/${fileName}|}" frameborder="0" class="w-full max-w-4xl h-[600px] rounded-md shadow border border-[#E0E0E0]"></iframe>
        </div>

        <!-- 텍스트 파일 -->
        <pre th:if="${isText}" class="mt-6 p-4 bg-[#B5D0E3] text-[#2F4160] rounded-md max-h-[600px] overflow-auto font-mono whitespace-pre-wrap">
        <span th:text="${textContent}">텍스트 내용</span>
    </pre>

        <!-- 미지원 파일 안내 -->
        <p th:if="${!isImage and !isDocument and !isText}" class="text-center text-red-500 font-semibold mt-8">
            미리보기를 지원하지 않는 파일입니다. 다운로드해 주세요.
        </p>

        <!-- 다운로드 링크 -->
        <p class="text-center text-lg mt-8">
            <a th:href="@{|/resource/download/file/${fileName}|}" class="text-[#2F4160] hover:underline font-semibold transition duration-300">
                <i class="fas fa-download mr-2"></i>파일 다운로드
            </a>
        </p>

        <!-- 관리자 목록으로 돌아가기 버튼 -->
        <div class="flex justify-center mt-8">
            <button type="button" class="bg-[#4B4B4B] text-white font-semibold py-2 px-6 rounded-lg hover:bg-[#2F4160] transition duration-300" onclick="location.href='/resource/admin/main'">
                <i class="fas fa-arrow-left mr-2"></i>관리자 목록으로
            </button>
        </div>
    </main>
</div>

<!-- 푸터 프래그먼트 삽입 -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

</body>
</html>
